option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production

  aws:elasticbeanstalk:container:nodejs:
    NodeCommand: "npm start"
    NodeVersion: 18.16.1

  aws:autoscaling:launchconfiguration:
    InstanceType: t2.micro
    SecurityGroups: sg-0123456789abcdef0  # Replace with your security group ID

files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/50npm.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      cd /var/app/current
      npm install --production
      npm prune --production

container_commands:
  01_node_install:
    command: |
      sudo yum update -y
      sudo yum install -y nodejs npm